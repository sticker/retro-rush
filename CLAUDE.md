# レトロラッシュ プロジェクトガイド

## プロジェクト概要
『レトロラッシュ』は、短時間（数秒〜数十秒）で完結するレトロ調ミニゲームを次々とプレイできるスマホ用カジュアルゲームです。メイドインワリオ風のゲームプレイ体験を提供します。

### 主な特徴
- 短時間完結型のシンプルなミニゲームコレクション
- 8ビット風のドット絵とピコピコ音楽によるレトロな演出
- 直感的な操作（タップ、スワイプ、傾け）
- 連続プレイによるスコア競争システム
- 数秒でルールが理解できる明快なゲームデザイン

## 技術スタック
- **フレームワーク**: Phaser 3
- **言語**: JavaScript (ES6+)
- **プラットフォーム**: HTML5 (スマートフォン対応)
- **ビルドツール**: なし（現時点では単純なHTML/JS構成）

## プロジェクト構造
```
retro-rush/
├── index.html          # メインHTML
├── js/
│   ├── main.js        # ゲームの初期化とシーン管理
│   ├── scenes/        # 各シーンのディレクトリ
│   │   ├── MenuScene.js      # メインメニュー
│   │   ├── GameSelectScene.js # ゲーム選択画面
│   │   └── games/            # 各ミニゲーム
│   │       ├── MoguraTataki.js   # モグラタタキ8bit
│   │       ├── RhythmJump.js     # リズムジャンプ
│   │       └── ColorMatch.js     # カラーマッチ
│   └── utils/         # ユーティリティ
│       ├── ScoreManager.js   # スコア管理
│       └── SoundManager.js   # サウンド管理
├── assets/            # アセットファイル
│   ├── images/       # 画像素材
│   └── sounds/       # 音声素材
└── style.css         # スタイルシート
```

## 開発規約

### コーディング規約
1. **日本語コメント**: すべての関数、クラス、重要な処理には詳細な日本語コメントを付ける
2. **命名規則**: 
   - クラス名: PascalCase (例: `MoguraTataki`)
   - 関数名: camelCase (例: `createMogura`)
   - 定数: UPPER_SNAKE_CASE (例: `GAME_TIME`)
3. **インデント**: スペース4つ
4. **ES6機能の活用**: アロー関数、テンプレートリテラル、分割代入などを積極的に使用

### ミニゲーム実装の基本構造
各ミニゲームは以下の要素を必ず含む：
```javascript
class GameName extends Phaser.Scene {
    constructor() {
        super({ key: 'GameName' });
        // ゲーム固有の設定
        this.gameTime = 5; // プレイ時間（秒）
        this.clearCondition = 5; // クリア条件
    }

    create() {
        // UI要素の作成（スコア、残り時間など）
        // ゲームオブジェクトの初期化
        // 入力イベントの設定
        // タイマーの開始
    }

    update(time, delta) {
        // ゲームロジックの更新
        // 時間管理
        // クリア判定
    }

    gameOver(isSuccess) {
        // ゲーム終了処理
        // スコア計算
        // 次のシーンへの遷移
    }
}
```

## 実装済みミニゲーム仕様

### 1. モグラタタキ8bit
- **カテゴリ**: リアクション系
- **クリア条件**: 5秒以内に5匹のモグラをタップ
- **操作**: タップ
- **実装ポイント**: 
  - 3×3のグリッドレイアウト
  - ランダムな出現パターン
  - 連続ヒット時のコンボシステム

### 2. リズムジャンプ
- **カテゴリ**: タイミング系
- **クリア条件**: リズムに合わせて3回成功
- **操作**: タップ
- **実装ポイント**:
  - 移動するバーと判定ラインの実装
  - タイミング判定（Perfect/Good/Miss）
  - リズムに合わせたBGM同期

### 3. カラーマッチ
- **カテゴリ**: シンプルパズル系
- **クリア条件**: 5個のブロックを正しい色の穴に誘導
- **操作**: スワイプ
- **実装ポイント**:
  - 物理演算を使った落下
  - スワイプによる横移動
  - 色判定ロジック

## スマートフォン対応

### タッチ操作の実装
```javascript
// タップイベント
this.input.on('pointerdown', (pointer) => {
    // タップ処理
});

// スワイプイベント
this.input.on('pointermove', (pointer) => {
    if (pointer.isDown) {
        // スワイプ処理
    }
});
```

### レスポンシブ対応
- ゲーム画面サイズ: 360×640px（縦持ち想定）
- スケールモード: `Phaser.Scale.FIT`
- デバイス回転時の対応

## サウンド実装ガイドライン
各ミニゲームには以下のサウンドを実装：
1. **BGM**: 8bit風の短いループ
2. **効果音**:
   - 成功音（ピロリン、ピンポン）
   - 失敗音（ブー、ガーン）
   - アクション音（ポコッ、ペシッ）
3. **音量調整**: ユーザー設定可能

## 今後の実装予定
1. **ゲーム追加**: 様々なカテゴリのミニゲームを追加
2. **ランキング機能**: オンラインランキングの実装
3. **実績システム**: アチーブメント機能
4. **カスタマイズ**: キャラクターやテーマの変更

## デバッグ・テスト
- Chrome DevToolsのデバイスエミュレータを使用
- 実機テスト（iOS Safari、Android Chrome）
- パフォーマンス目標: 60FPS維持

## ビルド・デプロイ
現在は静的ファイルとして配信。将来的にはWebpackやViteの導入を検討。

## 参考リンク
- [Phaser 3 公式ドキュメント](https://photonstorm.github.io/phaser3-docs/)
- [Phaser 3 Examples](https://phaser.io/examples)